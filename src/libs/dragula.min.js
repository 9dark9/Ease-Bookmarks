var dragula=function(){"use strict";const e=document.documentElement;var t,n=window.requestAnimationFrame||function(e){return setTimeout(e,1e3/60)},i=window.cancelAnimationFrame||function(e){clearTimeout(e)};class o extends EventTarget{constructor(f,p){super(),1===arguments.length&&!1===Array.isArray(f)&&([p,f]=[f,[]]);var g,m,v,h,w,y,E,S,b,L,C,x=this.options=Object.assign({},o.defaultOptions,p);if(this.containers=x.containers=x.containers||f||[],"function"!=typeof x.copy){let e=x.copy;x.copy=t=>e}this.dragging=!1;var O,X,Y=null;let T=this;function N(e){return T.containers.includes(e)||T.options.isContainer(e)}function B(t){e[(t?"remove":"add")+"EventListener"]("pointermove",A)}function F(t){e[(t?"remove":"add")+"EventListener"]("click",R)}function R(e){O&&e.preventDefault()}function P(e){if(y=e.clientX,E=e.clientY,!(1!==c(e)||e.metaKey||e.ctrlKey)){var t=e.target,n=M(t);n&&(O=n,B(),"pointerdown"===e.type&&(d(t)?t.focus():e.preventDefault()))}}function A(t){if(O)if(0!==c(t)){if(!(void 0!==t.clientX&&Math.abs(t.clientX-y)<=(T.options.slideFactorX||0)&&void 0!==t.clientY&&Math.abs(t.clientY-E)<=(T.options.slideFactorY||0))){if(T.options.ignoreInputTextSelection){var n=t.clientX||0,i=t.clientY||0;if(d(document.elementFromPoint(n,i)))return}var o=O;B(!0),F(),D(),j(o);var r=u(v);h=t.pageX-r.left,w=t.pageY-r.top;var l=L||v;l&&l.classList.add("gu-transit"),function(){if(g)return;var t=v.getBoundingClientRect();(g=v.cloneNode(!0)).style.width=t.width+"px",g.style.height=t.height+"px",g.classList.remove("gu-transit"),g.classList.add("gu-mirror"),T.options.mirrorContainer.appendChild(g),e.addEventListener("pointermove",G),T.options.mirrorContainer.classList.add("gu-unselectable"),T.emit("cloned",{clone:g,original:v,type:"mirror"})}(),G(t)}}else V({})}function M(e){if(!(T.dragging&&g||N(e))){for(var t=e;a(e)&&!1===N(a(e));){if(T.options.invalid(e,t))return;if(!(e=a(e)))return}var n=a(e);if(n)if(!T.options.invalid(e,t))if(T.options.moves(e,n,t,e.nextElementSibling))return{item:e,source:n}}}function j(e){x.copy(e.item,e.source)&&(L=e.item.cloneNode(!0),T.emit("cloned",{clone:L,original:e.item,type:"copy"})),m=e.source,v=e.item,S=b=e.item.nextElementSibling,T.dragging=!0,T.emit("drag",{element:v,source:m})}function D(){if(T.dragging){var e=L||v;q(e,a(e))}else i(t)}function H(){O=!1,B(!0),F(!0)}function V(e){if(H(),T.dragging){var t=L||v,n=e.clientX||0,i=e.clientY||0,o=W(s(g,n,i),n,i);o&&(L&&T.options.copySortSource||!L||o!==m)?q(t,o):T.options.removeOnSpill?I():K()}}function q(e,t){L&&T.options.copySortSource&&t===m&&v.remove(),z(t)&&!X?T.emit("cancel",{element:e,container:m,source:m}):T.emit("drop",{element:e,target:t,source:m,sibling:b,isHover:X}),k()}function I(){if(T.dragging){var e=L||v,t=a(e);t&&e.remove(),T.emit(L?"cancel":"remove",{element:e,container:t,source:m}),k()}}function K(e){if(T.dragging){var t=arguments.length>0?e:T.options.revertOnSpill,n=L||v,i=a(n),o=z(i);!1===o&&t&&(L?i&&L.remove():m.insertBefore(n,S)),o||t?T.emit("cancel",{element:n,container:m,source:m}):T.emit("drop",{element:n,target:i,source:m,sibling:b}),k()}}function k(){var n=L||v;i(t),H(),g&&(T.options.mirrorContainer.classList.remove("gu-unselectable"),e.removeEventListener("pointermove",G),g.remove(),g=null),n&&(n.classList.remove("gu-transit"),X&&(b.classList.remove("gu-drop-overlay"),n.remove())),C&&clearTimeout(C),T.dragging=!1,Y&&T.emit("out",{element:n,container:Y,source:m}),T.emit("dragend",{element:n}),m=v=L=S=b=C=Y=null}function z(e,t){var n;return n=void 0!==t?t:g?b:(L||v).nextElementSibling,e===m&&n===S}function W(e,t,n){for(var i=e;i&&!o();)i=a(i);return i;function o(){if(!1===N(i))return!1;var o=r(i,e),c=l(i,o,t,n,T.options.direction);return!!z(i,c)||T.options.accepts(v,i,m,c)}}function G(e){if(g){e.preventDefault();var o=e.clientX||0,c=e.clientY||0,d=o-h,f=c-w;g.style.left=d+"px",g.style.top=f+"px";var p=L||v,y=s(g,o,c),E=W(y,o,c),C=null!==E&&E!==Y;(C||null===E)&&(Y&&F("out"),Y=E,C&&F("over"));var O=a(p);if(E!==m||!L||T.options.copySortSource){var N,B=r(E,y);if(null!==B)N=l(E,B,o,c,T.options.direction);else{if(!0!==T.options.revertOnSpill||L)return void(L&&O&&p.remove());N=S,E=m}(null===N&&C||N!==p&&(N!==p.nextElementSibling||R(N)))&&(R(N)&&function(e){var t=(e.previousElementSibling||e.nextElementSibling||e).offsetTop===e.offsetTop,n=e.getBoundingClientRect();if(t)return o>n.left+n.width/4&&o<n.left+3*n.width/4;return c>n.top+n.height/4&&c<n.top+3*n.height/4}(N)?(N.classList.add("gu-drop-overlay"),X=!0):(b&&b.classList.remove("gu-drop-overlay"),E.insertBefore(p,N),T.emit("shadow",{element:p,container:E,source:m}),X=!1),b=N),function(e,n,o){var r=null,l=o.scrollEdge,c=20,s=P(e),a=null,d=null;n.touches?(a=n.touches[0].pageX,d=n.touches[0].pageY):(a=n.pageX,d=n.pageY);i(t),s?(d-u(s).top<l?A(s,-20,"scrollTop"):u(s).top+s.getBoundingClientRect().height-d<l&&A(s,c,"scrollTop"),a-s.getBoundingClientRect().left<l?A(s,-20,"scrollLeft"):u(s).left+s.getBoundingClientRect().width-a<l&&A(s,c,"scrollLeft")):(r=document.scrollingElement||document.documentElement||document.body,d-window.pageYOffset<l?A(r,-20,"scrollTop"):window.innerHeight-(d-window.pageYOffset)<l&&A(r,c,"scrollTop"),a-window.pageXOffset<l?A(r,-20,"scrollLeft"):window.innerWidth-(a-window.pageXOffset)<l&&A(r,c,"scrollLeft"))}(v,e,x)}else O&&p.remove()}function F(e){T.emit(e,{element:p,container:Y,source:m})}function R(e){return!!e&&null!==e.querySelector(x.folderCss)}function P(e){if(null===e)return null;var t=parseFloat(window.getComputedStyle(e).getPropertyValue("height"))+parseFloat(window.getComputedStyle(e).getPropertyValue("padding-top"))+parseFloat(window.getComputedStyle(e).getPropertyValue("padding-bottom"));return e.scrollHeight>Math.ceil(t)?e:new RegExp("(body|html)","i").test(e.parentNode.tagName)?null:P(e.parentNode)}function A(e,i,o){return t=n((function(){T.dragging&&A(e,i,o)})),e[o]+=.25*i}}!0===this.options.removeOnSpill&&this.on("over",(function(e){e&&e.classList.remove("gu-hide")})).on("out",(function(e){T.dragging&&e&&e.classList.add("gu-hide")})),e.addEventListener("pointerdown",P),e.addEventListener("pointerup",V),Object.assign(this,{start:function(e){var t=M(e);t&&j(t)},end:D,cancel:K,remove:I,destroy:function(){e.removeEventListener("pointerdown",P),e.removeEventListener("pointerup",V),V({})},canMove:function(e){return!!M(e)}})}on(e,t){return this.addEventListener(e,(e=>{t.call(this,...Object.values(e.detail))})),this}off(e,t){return this.removeEventListener(e,t),this}emit(e,t,...n){t instanceof Node&&(t=[t,...n]);let i=new CustomEvent(e,{detail:t});return this.dispatchEvent(i),this}static defaultOptions={moves:e=>!0,accepts:e=>!0,invalid:e=>!1,isContainer:e=>!1,copy:!1,copySortSource:!1,revertOnSpill:!1,removeOnSpill:!1,direction:"vertical",ignoreInputTextSelection:!0,mirrorContainer:document.body,folderCss:"[type=folder]",scrollEdge:36}}function r(t,n){for(var i=n;i!==t&&a(i)!==t;)i=a(i);return i===e?null:i}function l(e,t,n,i,o){var r="horizontal"===o;return t!==e?function(){var e=t.getBoundingClientRect();if(r)return l(n>e.left+e.width/2);return l(i>e.top+e.height/2)}():function(){var t,o,l,c=e.children.length;for(t=0;t<c;t++){if(o=e.children[t],l=o.getBoundingClientRect(),r&&l.left+l.width/2>n)return o;if(!r&&l.top+l.height/2>i)return o}return null}();function l(e){return e?t.nextElementSibling:t}}function c(e){if(void 0!==e.touches)return e.touches.length;if(void 0!==e.which&&0!==e.which)return e.which;if(void 0!==e.buttons)return e.buttons;var t=e.button;return void 0!==t?1&t?1:2&t?3:4&t?2:0:void 0}function u(e){var t=e.getBoundingClientRect();return{left:t.left+window.scrollX,top:t.top+window.scrollY}}function s(e,t,n){var i,o=(e=e||{}).className||"";return e.className+=" gu-hide",i=document.elementFromPoint(t,n),e.className=o,i}function a(e){return e.parentNode===document?null:e.parentNode}function d(e){return e?.matches("input, select, textarea")||f(e)}function f(e){return!!e&&("false"!==e.contentEditable&&("true"===e.contentEditable||f(a(e))))}return function(...e){return new o(...e)}}();
